# Token Optimizer Mode

토큰 사용량을 최소화하면서 작업을 효율적으로 수행하는 모드입니다.

## 핵심 원칙

1. **최소 읽기**: 필요한 파일/라인만 읽기
2. **최소 출력**: 핵심만 간결하게 응답
3. **최소 반복**: 이미 알고 있는 정보 재요청 안함
4. **최적 위임**: 적절한 서브 에이전트에 작업 분배

## 이 모드에서의 행동

`/token-optimizer` 활성화 시:

1. **모든 파일 읽기 전** 정말 필요한지 확인
2. **응답은 항상 간결하게** - 불필요한 설명 제거
3. **서브 에이전트 적극 활용** - 복잡한 탐색은 위임
4. **중간 확인 최소화** - 명확한 지시가 있으면 바로 실행
5. **출력 포맷 최적화** - 코드는 diff로, 목록은 bullet으로

## 작업 수행 방식

### 파일 탐색 시
```
1. Glob으로 파일 목록만 먼저 확인
2. 필요한 파일만 선택적으로 Read
3. 큰 파일은 offset/limit 사용하여 부분 읽기
4. 전체 내용 불필요시 Grep으로 패턴 검색만
```

### 코드 분석 시
```
1. 전체 파일 읽기 대신 관련 함수/클래스만
2. 의존성은 import 문만 확인
3. 불필요한 주석/공백 무시
```

### 응답 시
```
1. 요약 먼저, 상세는 요청시만
2. 코드 블록은 변경된 부분만
3. 설명은 bullet point로 간결하게
```

## 모델 선택 가이드

| 작업 유형 | 권장 모델 | 이유 |
|----------|----------|------|
| 파일 검색/목록 | haiku | 단순 작업 |
| 코드 포맷팅 | haiku | 패턴 기반 |
| 버그 수정 | sonnet | 논리 필요 |
| 아키텍처 설계 | opus | 복잡한 추론 |
| 테스트 생성 | sonnet | 중간 복잡도 |
| 문서 요약 | haiku | 추출 작업 |

## 컨텍스트 관리 전략

### 대화가 길어질 때
1. `/compact` 실행 권장
2. 또는 `/clear` 후 필요한 컨텍스트만 재설정

### 반복 작업 시
1. 공통 패턴은 스킬로 정의
2. 복잡한 탐색은 에이전트로 위임
3. 결과만 메인 대화로 반환

## 효율적인 요청 패턴

### 권장
```
"src/auth.ts의 login 함수만 보여줘"
"에러 메시지만 요약해줘"
"변경된 라인만 diff로"
```

### 비권장
```
"전체 파일 읽고 분석해줘"
"모든 테스트 결과 보여줘"
"히스토리 전체 설명해줘"
```

## 토큰 절약 체크리스트

작업 전:
- [ ] 이 작업에 가장 저렴한 모델은?
- [ ] 전체 파일이 정말 필요한가?
- [ ] 이미 읽은 정보를 다시 요청하는가?

작업 중:
- [ ] 출력을 최소화하고 있는가?
- [ ] 불필요한 설명을 하고 있지 않은가?
- [ ] 서브 에이전트로 위임할 수 있는가?

작업 후:
- [ ] 대화가 길어졌다면 /compact 필요한가?
- [ ] 다음 작업을 위해 /clear가 나은가?

## 비용 인식

```
haiku  : $$$      (1x)
sonnet : $$$$     (~3x)
opus   : $$$$$$$  (~15x)
```

**원칙**: 가능한 한 낮은 모델로 시작, 필요시만 상위 모델 사용
